

<!DOCTYPE html>
<html class="writer-html5" lang="en" data-content_root="../../">
<head>
  <meta charset="utf-8" /><meta name="viewport" content="width=device-width, initial-scale=1" />

  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>ADC Device &mdash; PyMoa  documentation</title>
      <link rel="stylesheet" type="text/css" href="../../_static/pygments.css?v=b86133f3" />
      <link rel="stylesheet" type="text/css" href="../../_static/css/theme.css?v=e59714d7" />

  
      <script src="../../_static/jquery.js?v=5d32c60e"></script>
      <script src="../../_static/_sphinx_javascript_frameworks_compat.js?v=2cd50e6c"></script>
      <script src="../../_static/documentation_options.js?v=5929fcd5"></script>
      <script src="../../_static/doctools.js?v=9bcbadda"></script>
      <script src="../../_static/sphinx_highlight.js?v=dc90522c"></script>
    <script src="../../_static/js/theme.js"></script>
    <link rel="index" title="Index" href="../../genindex.html" />
    <link rel="search" title="Search" href="../../search.html" />
    <link rel="next" title="Base" href="../base.html" />
    <link rel="prev" title="Analog Port" href="analog.html" /> 
</head>

<body class="wy-body-for-nav"> 
  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >

          
          
          <a href="../../index.html" class="icon icon-home">
            PyMoa
          </a>
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" aria-label="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>
        </div><div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
              <ul class="current">
<li class="toctree-l1"><a class="reference internal" href="../../installation.html">Installation</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../getting_started.html">Getting Started</a></li>
<li class="toctree-l1 current"><a class="reference internal" href="../api.html">The PyMoa API</a><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="../pymoa.html">PyMoa</a></li>
<li class="toctree-l2"><a class="reference internal" href="../stage/api.html">PyMoa Stage</a></li>
<li class="toctree-l2 current"><a class="reference internal" href="api.html">PyMoa Device</a><ul class="current">
<li class="toctree-l3"><a class="reference internal" href="device.html">Device</a></li>
<li class="toctree-l3"><a class="reference internal" href="device.html#pymoa.device.Device"><code class="docutils literal notranslate"><span class="pre">Device</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="port.html">Channel Devices</a></li>
<li class="toctree-l3"><a class="reference internal" href="port.html#pymoa.device.port.Channel"><code class="docutils literal notranslate"><span class="pre">Channel</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="port.html#pymoa.device.port.ChannelBase"><code class="docutils literal notranslate"><span class="pre">ChannelBase</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="port.html#pymoa.device.port.Port"><code class="docutils literal notranslate"><span class="pre">Port</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="digital.html">Digital Port</a></li>
<li class="toctree-l3"><a class="reference internal" href="digital.html#pymoa.device.digital.DigitalChannel"><code class="docutils literal notranslate"><span class="pre">DigitalChannel</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="digital.html#pymoa.device.digital.DigitalPort"><code class="docutils literal notranslate"><span class="pre">DigitalPort</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="digital.html#pymoa.device.digital.RandomDigitalChannel"><code class="docutils literal notranslate"><span class="pre">RandomDigitalChannel</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="digital.html#pymoa.device.digital.RandomDigitalPort"><code class="docutils literal notranslate"><span class="pre">RandomDigitalPort</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="analog.html">Analog Port</a></li>
<li class="toctree-l3"><a class="reference internal" href="analog.html#pymoa.device.analog.AnalogChannel"><code class="docutils literal notranslate"><span class="pre">AnalogChannel</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="analog.html#pymoa.device.analog.AnalogPort"><code class="docutils literal notranslate"><span class="pre">AnalogPort</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="analog.html#pymoa.device.analog.RandomAnalogChannel"><code class="docutils literal notranslate"><span class="pre">RandomAnalogChannel</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="analog.html#pymoa.device.analog.RandomAnalogPort"><code class="docutils literal notranslate"><span class="pre">RandomAnalogPort</span></code></a></li>
<li class="toctree-l3 current"><a class="current reference internal" href="#">ADC Device</a></li>
<li class="toctree-l3"><a class="reference internal" href="#pymoa.device.adc.ADCPort"><code class="docutils literal notranslate"><span class="pre">ADCPort</span></code></a><ul>
<li class="toctree-l4"><a class="reference internal" href="#pymoa.device.adc.ADCPort.active_channels"><code class="docutils literal notranslate"><span class="pre">ADCPort.active_channels</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="#pymoa.device.adc.ADCPort.bit_depth"><code class="docutils literal notranslate"><span class="pre">ADCPort.bit_depth</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="#pymoa.device.adc.ADCPort.data"><code class="docutils literal notranslate"><span class="pre">ADCPort.data</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="#pymoa.device.adc.ADCPort.frequency"><code class="docutils literal notranslate"><span class="pre">ADCPort.frequency</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="#pymoa.device.adc.ADCPort.num_channels"><code class="docutils literal notranslate"><span class="pre">ADCPort.num_channels</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="#pymoa.device.adc.ADCPort.offset"><code class="docutils literal notranslate"><span class="pre">ADCPort.offset</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="#pymoa.device.adc.ADCPort.raw_data"><code class="docutils literal notranslate"><span class="pre">ADCPort.raw_data</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="#pymoa.device.adc.ADCPort.scale"><code class="docutils literal notranslate"><span class="pre">ADCPort.scale</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="#pymoa.device.adc.ADCPort.ts_idx"><code class="docutils literal notranslate"><span class="pre">ADCPort.ts_idx</span></code></a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="#pymoa.device.adc.VirtualADCPort"><code class="docutils literal notranslate"><span class="pre">VirtualADCPort</span></code></a><ul>
<li class="toctree-l4"><a class="reference internal" href="#pymoa.device.adc.VirtualADCPort.data_func"><code class="docutils literal notranslate"><span class="pre">VirtualADCPort.data_func()</span></code></a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../base.html">Base</a></li>
<li class="toctree-l2"><a class="reference internal" href="../base.html#pymoa.base.MoaBase"><code class="docutils literal notranslate"><span class="pre">MoaBase</span></code></a></li>
<li class="toctree-l2"><a class="reference internal" href="../data_logger.html">Logger</a></li>
<li class="toctree-l2"><a class="reference internal" href="../data_logger.html#pymoa.data_logger.ObjectLogger"><code class="docutils literal notranslate"><span class="pre">ObjectLogger</span></code></a></li>
<li class="toctree-l2"><a class="reference internal" href="../data_logger.html#pymoa.data_logger.SimpleCSVLogger"><code class="docutils literal notranslate"><span class="pre">SimpleCSVLogger</span></code></a></li>
<li class="toctree-l2"><a class="reference internal" href="../data_logger.html#pymoa.data_logger.SimpleLoggingLogger"><code class="docutils literal notranslate"><span class="pre">SimpleLoggingLogger</span></code></a></li>
<li class="toctree-l2"><a class="reference internal" href="../data_logger.html#pymoa.data_logger.SimpleTerminalLogger"><code class="docutils literal notranslate"><span class="pre">SimpleTerminalLogger</span></code></a></li>
<li class="toctree-l2"><a class="reference internal" href="../utils.html">Utilities</a></li>
<li class="toctree-l2"><a class="reference internal" href="../utils.html#pymoa.utils.get_class_bases"><code class="docutils literal notranslate"><span class="pre">get_class_bases()</span></code></a></li>
</ul>
</li>
</ul>

        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap"><nav class="wy-nav-top" aria-label="Mobile navigation menu" >
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../../index.html">PyMoa</a>
      </nav>

      <div class="wy-nav-content">
        <div class="rst-content">
          <div role="navigation" aria-label="Page navigation">
  <ul class="wy-breadcrumbs">
      <li><a href="../../index.html" class="icon icon-home" aria-label="Home"></a></li>
          <li class="breadcrumb-item"><a href="../api.html">The PyMoa API</a></li>
          <li class="breadcrumb-item"><a href="api.html">PyMoa Device</a></li>
      <li class="breadcrumb-item active">ADC Device</li>
      <li class="wy-breadcrumbs-aside">
            <a href="../../_sources/api/device/adc.rst.txt" rel="nofollow"> View page source</a>
      </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
             
  <section id="adc-device">
<span id="module-pymoa.device.adc"></span><h1>ADC Device<a class="headerlink" href="#adc-device" title="Link to this heading"></a></h1>
<p>ADC implementation of <a class="reference internal" href="device.html#pymoa.device.Device" title="pymoa.device.Device"><code class="xref py py-class docutils literal notranslate"><span class="pre">Device</span></code></a>.</p>
</section>
<dl class="py class">
<dt class="sig sig-object py" id="pymoa.device.adc.ADCPort">
<em class="property"><span class="k"><span class="pre">class</span></span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">pymoa.device.adc.</span></span><span class="sig-name descname"><span class="pre">ADCPort</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">active_channels</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">num_channels</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">1</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">bit_depth</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">0</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">scale</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">1.0</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">offset</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">0</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">frequency</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">0</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">kwargs</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#pymoa.device.adc.ADCPort" title="Link to this definition"></a></dt>
<dd><p>Bases: <a class="reference internal" href="device.html#pymoa.device.Device" title="pymoa.device.Device"><code class="xref py py-class docutils literal notranslate"><span class="pre">Device</span></code></a></p>
<p>Abstract class that represents a multi-channel ADC.</p>
<p>For ADCs whose channels are sampled independently, each should be given
their own <a class="reference internal" href="#pymoa.device.adc.ADCPort" title="pymoa.device.adc.ADCPort"><code class="xref py py-class docutils literal notranslate"><span class="pre">ADCPort</span></code></a> instance. It typically only makes sense to
bundle multiple channels in one instance if they are sampled synchronously.</p>
<dl class="py attribute">
<dt class="sig sig-object py" id="pymoa.device.adc.ADCPort.active_channels">
<span class="sig-name descname"><span class="pre">active_channels</span></span><em class="property"><span class="w"> </span><span class="p"><span class="pre">=</span></span><span class="w"> </span><span class="pre">None</span></em><a class="headerlink" href="#pymoa.device.adc.ADCPort.active_channels" title="Link to this definition"></a></dt>
<dd><p>A list of booleans with length <a class="reference internal" href="#pymoa.device.adc.ADCPort.num_channels" title="pymoa.device.adc.ADCPort.num_channels"><code class="xref py py-attr docutils literal notranslate"><span class="pre">num_channels</span></code></a> indicating whether
each corresponding channel is active. Inactive channels are ones that don’t
get data.</p>
<p><a class="reference internal" href="#pymoa.device.adc.ADCPort.active_channels" title="pymoa.device.adc.ADCPort.active_channels"><code class="xref py py-attr docutils literal notranslate"><span class="pre">active_channels</span></code></a> is a <a class="reference external" href="https://kivy.org/doc/stable/api-kivy.properties.html#kivy.properties.ListProperty" title="(in Kivy v2.3.1)"><code class="xref py py-class docutils literal notranslate"><span class="pre">ListProperty</span></code></a>
and defaults to None.</p>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="pymoa.device.adc.ADCPort.bit_depth">
<span class="sig-name descname"><span class="pre">bit_depth</span></span><em class="property"><span class="w"> </span><span class="p"><span class="pre">=</span></span><span class="w"> </span><span class="pre">0</span></em><a class="headerlink" href="#pymoa.device.adc.ADCPort.bit_depth" title="Link to this definition"></a></dt>
<dd><p>The number of bits of <a class="reference internal" href="#pymoa.device.adc.ADCPort.raw_data" title="pymoa.device.adc.ADCPort.raw_data"><code class="xref py py-attr docutils literal notranslate"><span class="pre">raw_data</span></code></a> data points. If zero, only
<a class="reference internal" href="#pymoa.device.adc.ADCPort.data" title="pymoa.device.adc.ADCPort.data"><code class="xref py py-attr docutils literal notranslate"><span class="pre">data</span></code></a> is populated.</p>
<p><a class="reference internal" href="#pymoa.device.adc.ADCPort.bit_depth" title="pymoa.device.adc.ADCPort.bit_depth"><code class="xref py py-attr docutils literal notranslate"><span class="pre">bit_depth</span></code></a> is a <a class="reference external" href="https://kivy.org/doc/stable/api-kivy.properties.html#kivy.properties.NumericProperty" title="(in Kivy v2.3.1)"><code class="xref py py-class docutils literal notranslate"><span class="pre">NumericProperty</span></code></a>
and defaults to 0.</p>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="pymoa.device.adc.ADCPort.data">
<span class="sig-name descname"><span class="pre">data</span></span><em class="property"><span class="w"> </span><span class="p"><span class="pre">=</span></span><span class="w"> </span><span class="pre">None</span></em><a class="headerlink" href="#pymoa.device.adc.ADCPort.data" title="Link to this definition"></a></dt>
<dd><p>A list of length <a class="reference internal" href="#pymoa.device.adc.ADCPort.num_channels" title="pymoa.device.adc.ADCPort.num_channels"><code class="xref py py-attr docutils literal notranslate"><span class="pre">num_channels</span></code></a> containing the properly rescaled
floating point data for each channel.</p>
<p>Each element in the list is a list type containing the most recent data
read by the ADC. Rather than appending new data to old data, each new data
slice read replaces the previously read data so that <a class="reference internal" href="#pymoa.device.adc.ADCPort.data" title="pymoa.device.adc.ADCPort.data"><code class="xref py py-attr docutils literal notranslate"><span class="pre">data</span></code></a> only
contains the most recently read data for each channel. Channels that are
not read at a particular update will be represented by a empty list type.</p>
<p><a class="reference internal" href="#pymoa.device.adc.ADCPort.data" title="pymoa.device.adc.ADCPort.data"><code class="xref py py-attr docutils literal notranslate"><span class="pre">data</span></code></a> is a <a class="reference external" href="https://kivy.org/doc/stable/api-kivy.properties.html#kivy.properties.ListProperty" title="(in Kivy v2.3.1)"><code class="xref py py-class docutils literal notranslate"><span class="pre">ListProperty</span></code></a> and
defaults to None.</p>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="pymoa.device.adc.ADCPort.frequency">
<span class="sig-name descname"><span class="pre">frequency</span></span><em class="property"><span class="w"> </span><span class="p"><span class="pre">=</span></span><span class="w"> </span><span class="pre">0</span></em><a class="headerlink" href="#pymoa.device.adc.ADCPort.frequency" title="Link to this definition"></a></dt>
<dd><p>The frequency at which each ADC channel is sampled.</p>
<p><a class="reference internal" href="#pymoa.device.adc.ADCPort.frequency" title="pymoa.device.adc.ADCPort.frequency"><code class="xref py py-attr docutils literal notranslate"><span class="pre">frequency</span></code></a> is a <a class="reference external" href="https://kivy.org/doc/stable/api-kivy.properties.html#kivy.properties.NumericProperty" title="(in Kivy v2.3.1)"><code class="xref py py-class docutils literal notranslate"><span class="pre">NumericProperty</span></code></a>
and defaults to 0.0.</p>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="pymoa.device.adc.ADCPort.num_channels">
<span class="sig-name descname"><span class="pre">num_channels</span></span><em class="property"><span class="w"> </span><span class="p"><span class="pre">=</span></span><span class="w"> </span><span class="pre">1</span></em><a class="headerlink" href="#pymoa.device.adc.ADCPort.num_channels" title="Link to this definition"></a></dt>
<dd><p>The number of channels in the ADC.</p>
<p><a class="reference internal" href="#pymoa.device.adc.ADCPort.num_channels" title="pymoa.device.adc.ADCPort.num_channels"><code class="xref py py-attr docutils literal notranslate"><span class="pre">num_channels</span></code></a> is a <a class="reference external" href="https://kivy.org/doc/stable/api-kivy.properties.html#kivy.properties.NumericProperty" title="(in Kivy v2.3.1)"><code class="xref py py-class docutils literal notranslate"><span class="pre">NumericProperty</span></code></a>
and defaults to 1.</p>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="pymoa.device.adc.ADCPort.offset">
<span class="sig-name descname"><span class="pre">offset</span></span><em class="property"><span class="w"> </span><span class="p"><span class="pre">=</span></span><span class="w"> </span><span class="pre">0</span></em><a class="headerlink" href="#pymoa.device.adc.ADCPort.offset" title="Link to this definition"></a></dt>
<dd><p>The offset when converting <a class="reference internal" href="#pymoa.device.adc.ADCPort.raw_data" title="pymoa.device.adc.ADCPort.raw_data"><code class="xref py py-attr docutils literal notranslate"><span class="pre">raw_data</span></code></a> to <a class="reference internal" href="#pymoa.device.adc.ADCPort.data" title="pymoa.device.adc.ADCPort.data"><code class="xref py py-attr docutils literal notranslate"><span class="pre">data</span></code></a>.</p>
<p><a class="reference internal" href="#pymoa.device.adc.ADCPort.offset" title="pymoa.device.adc.ADCPort.offset"><code class="xref py py-attr docutils literal notranslate"><span class="pre">offset</span></code></a> is a <a class="reference external" href="https://kivy.org/doc/stable/api-kivy.properties.html#kivy.properties.NumericProperty" title="(in Kivy v2.3.1)"><code class="xref py py-class docutils literal notranslate"><span class="pre">NumericProperty</span></code></a>
and defaults to 0.0.</p>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="pymoa.device.adc.ADCPort.raw_data">
<span class="sig-name descname"><span class="pre">raw_data</span></span><em class="property"><span class="w"> </span><span class="p"><span class="pre">=</span></span><span class="w"> </span><span class="pre">None</span></em><a class="headerlink" href="#pymoa.device.adc.ADCPort.raw_data" title="Link to this definition"></a></dt>
<dd><p>A list of length <a class="reference internal" href="#pymoa.device.adc.ADCPort.num_channels" title="pymoa.device.adc.ADCPort.num_channels"><code class="xref py py-attr docutils literal notranslate"><span class="pre">num_channels</span></code></a> containing the raw data for each
channel. The structure is similar to <a class="reference internal" href="#pymoa.device.adc.ADCPort.data" title="pymoa.device.adc.ADCPort.data"><code class="xref py py-attr docutils literal notranslate"><span class="pre">data</span></code></a>.</p>
<p>As opposed to <a class="reference internal" href="#pymoa.device.adc.ADCPort.data" title="pymoa.device.adc.ADCPort.data"><code class="xref py py-attr docutils literal notranslate"><span class="pre">data</span></code></a> which keeps the data as floats representing the
actual signal being sensed, <a class="reference internal" href="#pymoa.device.adc.ADCPort.raw_data" title="pymoa.device.adc.ADCPort.raw_data"><code class="xref py py-attr docutils literal notranslate"><span class="pre">raw_data</span></code></a> stores the data as a raw n-bit
unsigned integer. Each value in <a class="reference internal" href="#pymoa.device.adc.ADCPort.data" title="pymoa.device.adc.ADCPort.data"><code class="xref py py-attr docutils literal notranslate"><span class="pre">data</span></code></a> is derived from an identical
element in <a class="reference internal" href="#pymoa.device.adc.ADCPort.raw_data" title="pymoa.device.adc.ADCPort.raw_data"><code class="xref py py-attr docutils literal notranslate"><span class="pre">raw_data</span></code></a> using the following formula:</p>
<p><a class="reference internal" href="#pymoa.device.adc.ADCPort.data" title="pymoa.device.adc.ADCPort.data"><code class="xref py py-attr docutils literal notranslate"><span class="pre">data</span></code></a> = <a class="reference internal" href="#pymoa.device.adc.ADCPort.raw_data" title="pymoa.device.adc.ADCPort.raw_data"><code class="xref py py-attr docutils literal notranslate"><span class="pre">raw_data</span></code></a> * <a class="reference internal" href="#pymoa.device.adc.ADCPort.scale" title="pymoa.device.adc.ADCPort.scale"><code class="xref py py-attr docutils literal notranslate"><span class="pre">scale</span></code></a> / (2 ^ <a class="reference internal" href="#pymoa.device.adc.ADCPort.bit_depth" title="pymoa.device.adc.ADCPort.bit_depth"><code class="xref py py-attr docutils literal notranslate"><span class="pre">bit_depth</span></code></a>
) - <a class="reference internal" href="#pymoa.device.adc.ADCPort.offset" title="pymoa.device.adc.ADCPort.offset"><code class="xref py py-attr docutils literal notranslate"><span class="pre">offset</span></code></a>.</p>
<p>The reverse conversion: <a class="reference internal" href="#pymoa.device.adc.ADCPort.raw_data" title="pymoa.device.adc.ADCPort.raw_data"><code class="xref py py-attr docutils literal notranslate"><span class="pre">raw_data</span></code></a> = (<a class="reference internal" href="#pymoa.device.adc.ADCPort.data" title="pymoa.device.adc.ADCPort.data"><code class="xref py py-attr docutils literal notranslate"><span class="pre">data</span></code></a> + <a class="reference internal" href="#pymoa.device.adc.ADCPort.offset" title="pymoa.device.adc.ADCPort.offset"><code class="xref py py-attr docutils literal notranslate"><span class="pre">offset</span></code></a>
) * (2 ^ <a class="reference internal" href="#pymoa.device.adc.ADCPort.bit_depth" title="pymoa.device.adc.ADCPort.bit_depth"><code class="xref py py-attr docutils literal notranslate"><span class="pre">bit_depth</span></code></a>) / <a class="reference internal" href="#pymoa.device.adc.ADCPort.scale" title="pymoa.device.adc.ADCPort.scale"><code class="xref py py-attr docutils literal notranslate"><span class="pre">scale</span></code></a>.</p>
<p><a class="reference internal" href="#pymoa.device.adc.ADCPort.raw_data" title="pymoa.device.adc.ADCPort.raw_data"><code class="xref py py-attr docutils literal notranslate"><span class="pre">raw_data</span></code></a> is a <a class="reference external" href="https://kivy.org/doc/stable/api-kivy.properties.html#kivy.properties.ListProperty" title="(in Kivy v2.3.1)"><code class="xref py py-class docutils literal notranslate"><span class="pre">ListProperty</span></code></a> and
defaults to None.</p>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="pymoa.device.adc.ADCPort.scale">
<span class="sig-name descname"><span class="pre">scale</span></span><em class="property"><span class="w"> </span><span class="p"><span class="pre">=</span></span><span class="w"> </span><span class="pre">1.0</span></em><a class="headerlink" href="#pymoa.device.adc.ADCPort.scale" title="Link to this definition"></a></dt>
<dd><p>The scale when converting <a class="reference internal" href="#pymoa.device.adc.ADCPort.raw_data" title="pymoa.device.adc.ADCPort.raw_data"><code class="xref py py-attr docutils literal notranslate"><span class="pre">raw_data</span></code></a> to <a class="reference internal" href="#pymoa.device.adc.ADCPort.data" title="pymoa.device.adc.ADCPort.data"><code class="xref py py-attr docutils literal notranslate"><span class="pre">data</span></code></a>.</p>
<p><a class="reference internal" href="#pymoa.device.adc.ADCPort.scale" title="pymoa.device.adc.ADCPort.scale"><code class="xref py py-attr docutils literal notranslate"><span class="pre">scale</span></code></a> is a <a class="reference external" href="https://kivy.org/doc/stable/api-kivy.properties.html#kivy.properties.NumericProperty" title="(in Kivy v2.3.1)"><code class="xref py py-class docutils literal notranslate"><span class="pre">NumericProperty</span></code></a>
and defaults to 1.0.</p>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="pymoa.device.adc.ADCPort.ts_idx">
<span class="sig-name descname"><span class="pre">ts_idx</span></span><em class="property"><span class="w"> </span><span class="p"><span class="pre">=</span></span><span class="w"> </span><span class="pre">None</span></em><a class="headerlink" href="#pymoa.device.adc.ADCPort.ts_idx" title="Link to this definition"></a></dt>
<dd><p>A list of length <a class="reference internal" href="#pymoa.device.adc.ADCPort.num_channels" title="pymoa.device.adc.ADCPort.num_channels"><code class="xref py py-attr docutils literal notranslate"><span class="pre">num_channels</span></code></a>, where each element in the list
indicates the index in <a class="reference internal" href="#pymoa.device.adc.ADCPort.data" title="pymoa.device.adc.ADCPort.data"><code class="xref py py-attr docutils literal notranslate"><span class="pre">data</span></code></a> and <a class="reference internal" href="#pymoa.device.adc.ADCPort.raw_data" title="pymoa.device.adc.ADCPort.raw_data"><code class="xref py py-attr docutils literal notranslate"><span class="pre">raw_data</span></code></a> that is
timestamped by <code class="xref py py-attr docutils literal notranslate"><span class="pre">timestamp</span></code>. The <code class="xref py py-attr docutils literal notranslate"><span class="pre">timestamp</span></code> is the time of
a data point for each channel. This data point can be different for each
channel, so the index indicates the corresponding data point read at the
time of <code class="xref py py-attr docutils literal notranslate"><span class="pre">timestamp</span></code>.</p>
<p><a class="reference internal" href="#pymoa.device.adc.ADCPort.ts_idx" title="pymoa.device.adc.ADCPort.ts_idx"><code class="xref py py-attr docutils literal notranslate"><span class="pre">ts_idx</span></code></a> is a <a class="reference external" href="https://kivy.org/doc/stable/api-kivy.properties.html#kivy.properties.ListProperty" title="(in Kivy v2.3.1)"><code class="xref py py-class docutils literal notranslate"><span class="pre">ListProperty</span></code></a> and
defaults to None.</p>
</dd></dl>

</dd></dl>

<dl class="py class">
<dt class="sig sig-object py" id="pymoa.device.adc.VirtualADCPort">
<em class="property"><span class="k"><span class="pre">class</span></span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">pymoa.device.adc.</span></span><span class="sig-name descname"><span class="pre">VirtualADCPort</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">active_channels</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">num_channels</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">1</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">bit_depth</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">0</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">scale</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">1.0</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">offset</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">0</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">frequency</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">0</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">kwargs</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#pymoa.device.adc.VirtualADCPort" title="Link to this definition"></a></dt>
<dd><p>Bases: <a class="reference internal" href="#pymoa.device.adc.ADCPort" title="pymoa.device.adc.ADCPort"><code class="xref py py-class docutils literal notranslate"><span class="pre">ADCPort</span></code></a></p>
<p>A virtual implementation of <a class="reference internal" href="#pymoa.device.adc.ADCPort" title="pymoa.device.adc.ADCPort"><code class="xref py py-class docutils literal notranslate"><span class="pre">ADCPort</span></code></a>.</p>
<p>The class simulates an ADC device with channel data generation. The
<a class="reference internal" href="#pymoa.device.adc.ADCPort" title="pymoa.device.adc.ADCPort"><code class="xref py py-class docutils literal notranslate"><span class="pre">ADCPort</span></code></a> conversion parameters must be initialized and once
activated will start updating the channel data using the <a class="reference internal" href="#pymoa.device.adc.VirtualADCPort.data_func" title="pymoa.device.adc.VirtualADCPort.data_func"><code class="xref py py-attr docutils literal notranslate"><span class="pre">data_func</span></code></a>
callback.</p>
<p>For example:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span><span class="w"> </span><span class="nn">pymoa.device.adc</span><span class="w"> </span><span class="kn">import</span> <span class="n">VirtualADCPort</span>
<span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span><span class="w"> </span><span class="nn">math</span><span class="w"> </span><span class="kn">import</span> <span class="n">cos</span><span class="p">,</span> <span class="n">pi</span>
<span class="gp">&gt;&gt;&gt; </span><span class="k">class</span><span class="w"> </span><span class="nc">ADC</span><span class="p">(</span><span class="n">VirtualADCPort</span><span class="p">):</span>
<span class="gp">... </span>    <span class="k">def</span><span class="w"> </span><span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">):</span>
<span class="gp">... </span>        <span class="nb">super</span><span class="p">(</span><span class="n">ADC</span><span class="p">,</span> <span class="bp">self</span><span class="p">)</span><span class="o">.</span><span class="fm">__init__</span><span class="p">(</span><span class="o">**</span><span class="n">kwargs</span><span class="p">)</span>
<span class="gp">... </span>        <span class="bp">self</span><span class="o">.</span><span class="n">scale</span> <span class="o">=</span> <span class="mi">10</span>
<span class="gp">... </span>        <span class="bp">self</span><span class="o">.</span><span class="n">offset</span> <span class="o">=</span> <span class="mi">5</span>
<span class="gp">...</span>
<span class="gp">... </span>        <span class="k">def</span><span class="w"> </span><span class="nf">next_point</span><span class="p">(</span><span class="n">idx</span><span class="p">,</span> <span class="n">channel</span><span class="p">):</span>
<span class="gp">... </span>            <span class="n">rate</span> <span class="o">=</span> <span class="mi">1</span>
<span class="gp">... </span>            <span class="k">if</span> <span class="n">channel</span> <span class="o">==</span> <span class="mi">0</span><span class="p">:</span>
<span class="gp">... </span>                <span class="k">return</span> <span class="mf">.2</span> <span class="o">*</span> <span class="n">cos</span><span class="p">(</span><span class="mi">2</span> <span class="o">*</span> <span class="n">pi</span> <span class="o">*</span> <span class="n">idx</span> <span class="o">*</span> <span class="n">rate</span> <span class="o">/</span> <span class="nb">float</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">frequency</span><span class="p">))</span>
<span class="gp">... </span>            <span class="k">return</span> <span class="mi">4</span> <span class="o">*</span> <span class="n">cos</span><span class="p">(</span><span class="mi">2</span> <span class="o">*</span> <span class="n">pi</span> <span class="o">*</span> <span class="n">idx</span> <span class="o">*</span> <span class="n">rate</span> <span class="o">/</span> <span class="nb">float</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">frequency</span><span class="p">))</span>
<span class="gp">... </span>        <span class="bp">self</span><span class="o">.</span><span class="n">data_func</span> <span class="o">=</span> <span class="n">next_point</span>
<span class="gp">...</span>
<span class="gp">... </span>    <span class="k">def</span><span class="w"> </span><span class="nf">on_data_update</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="o">*</span><span class="n">largs</span><span class="p">):</span>
<span class="gp">... </span>        <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;Data (</span><span class="si">{:.2f}</span><span class="s1">): </span><span class="si">{}</span><span class="s1">&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">timestamp</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">data</span><span class="p">))</span>
<span class="gp">... </span>        <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;Raw data (</span><span class="si">{:.2f}</span><span class="s1">): </span><span class="si">{}</span><span class="s1">&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">timestamp</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">raw_data</span><span class="p">))</span>

<span class="gp">&gt;&gt;&gt; </span><span class="n">adc</span> <span class="o">=</span> <span class="n">ADC</span><span class="p">(</span><span class="n">num_channels</span><span class="o">=</span><span class="mi">2</span><span class="p">,</span> <span class="n">active_channels</span><span class="o">=</span><span class="p">[</span><span class="kc">True</span><span class="p">,</span> <span class="kc">True</span><span class="p">],</span> <span class="n">data_size</span><span class="o">=</span><span class="mi">2</span><span class="p">,</span> <span class="n">frequency</span><span class="o">=</span><span class="mi">4</span><span class="p">,</span> <span class="n">bit_depth</span><span class="o">=</span><span class="mi">16</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">adc</span><span class="o">.</span><span class="n">activate</span><span class="p">(</span><span class="n">adc</span><span class="p">)</span>
<span class="go">Data (1.26): [[0.2, 0.0], [4.0, 0.0]]</span>
<span class="go">Raw data (1.26): [[34078, 32768], [58982, 32768]]</span>
<span class="go">Data (1.52): [[-0.2, 0.0], [-4.0, 0.0]]</span>
<span class="go">Raw data (1.52): [[31457, 32768], [6553, 32767]]</span>
<span class="go">Data (1.77): [[0.2, 0.0], [4.0, 0.0]]</span>
<span class="go">Raw data (1.77): [[34078, 32768], [58982, 32768]]</span>
<span class="go">...</span>
</pre></div>
</div>
<dl class="py method">
<dt class="sig sig-object py" id="pymoa.device.adc.VirtualADCPort.data_func">
<span class="sig-name descname"><span class="pre">data_func</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">sample</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">channel</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#pymoa.device.adc.VirtualADCPort.data_func" title="Link to this definition"></a></dt>
<dd><p>A callback that we call when we need a new data point. The callback
takes two parameters; a index parameter which is the index of the data
point requested, and the channel number for which the data is
requested. The function returns the generated sample value for that
index and channel.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>The data returned is for <a class="reference internal" href="#pymoa.device.adc.ADCPort.data" title="pymoa.device.adc.ADCPort.data"><code class="xref py py-attr docutils literal notranslate"><span class="pre">ADCPort.data</span></code></a>,
<a class="reference internal" href="#pymoa.device.adc.ADCPort.raw_data" title="pymoa.device.adc.ADCPort.raw_data"><code class="xref py py-attr docutils literal notranslate"><span class="pre">ADCPort.raw_data</span></code></a> values are computed from it.</p>
</div>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>sample</strong></p></li>
<li><p><strong>channel</strong></p></li>
</ul>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p></p>
</dd>
</dl>
</dd></dl>

</dd></dl>



           </div>
          </div>
          <footer><div class="rst-footer-buttons" role="navigation" aria-label="Footer">
        <a href="analog.html" class="btn btn-neutral float-left" title="Analog Port" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left" aria-hidden="true"></span> Previous</a>
        <a href="../base.html" class="btn btn-neutral float-right" title="Base" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right" aria-hidden="true"></span></a>
    </div>

  <hr/>

  <div role="contentinfo">
    <p>&#169; Copyright 2020, Matthew Einhorn.</p>
  </div>

  Built with <a href="https://www.sphinx-doc.org/">Sphinx</a> using a
    <a href="https://github.com/readthedocs/sphinx_rtd_theme">theme</a>
    provided by <a href="https://readthedocs.org">Read the Docs</a>.
   

</footer>
        </div>
      </div>
    </section>
  </div>
  <script>
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script> 

</body>
</html>